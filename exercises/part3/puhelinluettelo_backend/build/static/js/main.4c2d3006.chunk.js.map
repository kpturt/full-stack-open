{"version":3,"sources":["AddPersonForm.js","Filter.js","Numbers.js","services/persons.js","App.js","index.js"],"names":["AddPersonForm","props","onSubmit","value","name","onChange","onNameChange","number","onNumberChange","type","Filter","Numbers","numbersToShow","persons","filter","person","toLowerCase","indexOf","filterBar","toUpperCase","map","onClick","id","baseUrl","exportDefault","getAll","console","log","axios","get","then","response","data","create","newObject","post","update","put","removeName","delete","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilterBar","notificationMessage","setNotificationMessage","errorClass","setErrorClass","useEffect","personService","initialPersons","Notification","message","className","color","event","preventDefault","nameObject","length","window","alert","some","confirm","oldID","find","setTimeout","returnedPerson","concat","target","namm","catch","error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4c2d3006.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst AddPersonForm = (props) => {\r\n    return (\r\n        <form onSubmit={props.onSubmit}>\r\n            <div>\r\n                name: <input value={props.name} onChange={props.onNameChange}/>\r\n            </div>\r\n            <div>\r\n                number: <input value={props.number} onChange={props.onNumberChange}/>\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default AddPersonForm","import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n    return (\r\n        <div>\r\n            search contacts: <input value={props.value} onChange={props.onChange}></input>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Numbers = (props) => {\r\n    const persons = props.persons\r\n    \r\n    /*need to come up with a solution for a better search*/\r\n    const numbersToShow = persons.filter(person => person.name.toLowerCase().indexOf(props.filterBar) === 0 \r\n        || person.name.toUpperCase().indexOf(props.filterBar) === 0 \r\n        || person.name.indexOf(props.filterBar) === 0\r\n    )\r\n\r\n    return (\r\n        <div>\r\n            <h2>Numbers</h2>\r\n            <ul>\r\n                {numbersToShow.map(person => \r\n                <li key={person.id}> {person?.name} {person.number} \r\n                    {<button type=\"delete\" onClick={props.onClick} id={person.id} >delete</button>}\r\n                </li>)}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Numbers","import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3001/api/persons'\r\n\r\nconst getAll = () => {\r\n    console.log('personsService getAll')\r\n    //return axios.get(baseUrl)\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = (newObject) => {\r\n    console.log('personsService create')\r\n    //return axios.post(baseUrl, newObject)\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (newObject, id) => {\r\n    console.log('personsService update')\r\n    //return axios.put(`${baseUrl}/${id}`, newObject)\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst removeName = (id) => {\r\n    console.log('personsService remove')\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\n/*const exportDefault = {\r\n    getAll: getAll,\r\n    create: create,\r\n    update: update\r\n}*/\r\nconst exportDefault = {getAll, create, update, removeName}\r\nexport default exportDefault","import React, { useState, useEffect } from 'react'\nimport AddPersonForm from './AddPersonForm'\nimport Filter from './Filter'\nimport Numbers from './Numbers'\nimport personService from './services/persons'\nimport './index.css'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [newName, setNewName ] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filterBar, setFilterBar] = useState('')\n  const [notificationMessage, setNotificationMessage] = useState(null)\n  const [errorClass, setErrorClass] = useState()\n\n  useEffect(() => {\n    console.log('effect')\n    personService\n      .getAll()\n      .then(initialPersons => {\n        console.log('promise fulfilled')\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  /*render notification bar, changes the error color according to the message*/\n  const Notification = ({message}) => {\n    if(message === null){\n      return null\n    }\n    return(\n      <div className = {errorClass}>\n        {message}\n      </div>\n    )\n  }\n\n  /*renders to console what is written, sets the written name as a new value for the variable*/\n  const handleNameChange = (event) => {\n    //console.log('handling name change: ', event.target.value) //writes search bar to console\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleFilterBar = (event) => {\n    setFilterBar(event.target.value)\n  }\n\n  /*adds the new name to the persons list*/\n  const addName = (event) => {\n    event.preventDefault() //prevents the page from reloading after adding name\n    console.log('adding new name: ', newName, 'number: ', newNumber)\n    const nameObject = {\n      name: newName,\n      number: newNumber\n      //is and should rather be handled by server, id bugs with deletions and needs a fix\n      //id: persons.length+1\n    }\n    \n    //checks empty fields\n    if(newName.length === 0 || newNumber.length === 0) {\n      console.log('empty name, sending alert')\n      window.alert('your contact is missing either a name or a number')\n    }\n    /**\n     * checks duplicate names\n     * duplicate numbers: || persons.some(person => person.number === newNumber)\n     * duplicate numbers creates a bug with oldID\n     */\n    else if(persons.some(person => person.name === newName)){\n      console.log('duplicate name, sending alert')\n      if(window.confirm(`A person called ${newName} or the number ${newNumber} is already in your phonebook. Do you want to replace this person's number?`)){\n        const oldID = persons.find(person => person.name === newName).id\n        console.log('oldID: ', oldID)\n        personService\n        .update(nameObject, oldID)\n        .then(response => {\n          setPersons(persons.map(person => person.id !== oldID ? person : response))\n          setNewName('')\n          setNewNumber('')\n          //notification\n          setErrorClass('success')\n          setNotificationMessage(\n            `${nameObject.name}'s number changed in phonebook.`\n          )\n          setTimeout(() => {\n            setNotificationMessage(null)\n          }, 5000)\n        })\n      }\n    }\n    else {\n      console.log('nameObject: ', nameObject)\n      personService\n        .create(nameObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          //notification\n          setErrorClass('success')\n          setNotificationMessage(\n            `${nameObject.name} added to phonebook.`\n          )\n          setTimeout(() => {\n            setNotificationMessage(null)\n          }, 5000)\n        })\n    }\n  }\n\n  const deleteName = (event) => {\n    event.preventDefault()\n    console.log('deleting name')\n    console.log('event id: ', event.target.id)\n    console.log('person id: ', persons.find(person => person.id == event.target.id).id)\n    const namm = {\n      name: persons.find(person => person.id == event.target.id).name,\n      number: persons.find(person => person.id == event.target.id).number,\n      id: persons.find(person => person.id == event.target.id).id\n    }\n    console.log('NAMM', namm)\n    if(window.confirm(`Remove id: ${event.target.id} ?`)){\n      console.log('deleting name: ', event.target.id)\n      personService\n      .removeName(event.target.id)\n      .then(response => {\n        console.log('event.target.id: ', event.target.id, 'response: ', response)\n        console.log('persons return filter: ', persons.filter(persons => persons.id != event.target.id))\n        setPersons(persons.filter(person => person.id != event.target.id))\n        //notification\n        setErrorClass('error')\n        setNotificationMessage(\n          `${persons.find(person => person.id == event.target.id).name} deleted from phonebook.`\n        )\n        setTimeout(() => {\n          setNotificationMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        //setErrorMessage(error);\n        //alert('Error')\n        setErrorClass('error')\n        setNotificationMessage(\n          `${persons.find(person => person.id == event.target.id).name} has already been deleted.`\n        )\n        setTimeout(() => {\n          setNotificationMessage(null)\n        }, 5000)\n      });\n    }\n  }\n\n  return (\n    <div>\n      <Notification message={notificationMessage} color={errorClass}/>\n      <h2>Phonebook</h2>\n      <AddPersonForm onSubmit={addName} name={newName} onNameChange={handleNameChange} number={newNumber} onNumberChange={handleNumberChange}/>\n      <Filter value={filterBar} onChange={handleFilterBar}/>\n      <Numbers persons={persons} filterBar={filterBar} onClick={deleteName} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}