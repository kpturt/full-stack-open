(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var o=t(1),r=t.n(o),c=t(15),i=t.n(c),a=(t(6),t(3)),u=t(0),l=function(e){return Object(u.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:e.name,onChange:e.onNameChange})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:e.number,onChange:e.onNumberChange})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},s=function(e){return Object(u.jsxs)("div",{children:["search contacts: ",Object(u.jsx)("input",{value:e.value,onChange:e.onChange})]})},d=function(e){var n=e.persons.filter((function(n){return 0===n.name.toLowerCase().indexOf(e.filterBar)||0===n.name.toUpperCase().indexOf(e.filterBar)||0===n.name.indexOf(e.filterBar)}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)("ul",{children:n.map((function(n){return Object(u.jsxs)("li",{children:[" ",null===n||void 0===n?void 0:n.name," ",n.number,Object(u.jsx)("button",{type:"delete",onClick:e.onClick,id:n.id,children:"delete"})]},n.id)}))})]})},f=t(4),m=t.n(f),b="/api/persons",g={getAll:function(){return console.log("personsService getAll"),m.a.get(b).then((function(e){return e.data}))},create:function(e){return console.log("personsService create"),m.a.post(b,e).then((function(e){return e.data}))},update:function(e,n){return console.log("personsService update"),m.a.put("".concat(b,"/").concat(n),e).then((function(e){return e.data}))},removeName:function(e){return console.log("personsService remove"),m.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))}},j=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),i=Object(a.a)(c,2),f=i[0],m=i[1],b=Object(o.useState)(""),j=Object(a.a)(b,2),h=j[0],p=j[1],O=Object(o.useState)(""),v=Object(a.a)(O,2),x=v[0],C=v[1],S=Object(o.useState)(null),w=Object(a.a)(S,2),k=w[0],y=w[1],N=Object(o.useState)(),A=Object(a.a)(N,2),B=A[0],D=A[1];Object(o.useEffect)((function(){console.log("effect"),g.getAll().then((function(e){console.log("promise fulfilled"),r(e)}))}),[]);var T=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:B,children:n})};return Object(u.jsxs)("div",{children:[Object(u.jsx)(T,{message:k,color:B}),Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(l,{onSubmit:function(e){e.preventDefault(),console.log("adding new name: ",f,"number: ",h);var n={name:f,number:h};if(0===f.length||0===h.length)console.log("empty name, sending alert"),window.alert("your contact is missing either a name or a number");else if(t.some((function(e){return e.name===f}))){if(console.log("duplicate name, sending alert"),window.confirm("A person called ".concat(f," or the number ").concat(h," is already in your phonebook. Do you want to replace this person's number?"))){var o=t.find((function(e){return e.name===f})).id;console.log("oldID: ",o),g.update(n,o).then((function(e){r(t.map((function(n){return n.id!==o?n:e}))),m(""),p(""),D("success"),y("".concat(n.name,"'s number changed in phonebook.")),setTimeout((function(){y(null)}),5e3)}))}}else console.log("nameObject: ",n),g.create(n).then((function(e){r(t.concat(e)),m(""),p(""),D("success"),y("".concat(n.name," added to phonebook.")),setTimeout((function(){y(null)}),5e3)}))},name:f,onNameChange:function(e){m(e.target.value)},number:h,onNumberChange:function(e){p(e.target.value)}}),Object(u.jsx)(s,{value:x,onChange:function(e){C(e.target.value)}}),Object(u.jsx)(d,{persons:t,filterBar:x,onClick:function(e){e.preventDefault(),console.log("deleting name"),console.log("event id: ",e.target.id),console.log("person id: ",t.find((function(n){return n.id==e.target.id})).id);var n={name:t.find((function(n){return n.id==e.target.id})).name,number:t.find((function(n){return n.id==e.target.id})).number,id:t.find((function(n){return n.id==e.target.id})).id};console.log("NAMM",n),window.confirm("Remove id: ".concat(e.target.id," ?"))&&(console.log("deleting name: ",e.target.id),g.removeName(e.target.id).then((function(n){console.log("event.target.id: ",e.target.id,"response: ",n),console.log("persons return filter: ",t.filter((function(n){return n.id!=e.target.id}))),r(t.filter((function(n){return n.id!=e.target.id}))),D("error"),y("".concat(t.find((function(n){return n.id==e.target.id})).name," deleted from phonebook.")),setTimeout((function(){y(null)}),5e3)})).catch((function(n){D("error"),y("".concat(t.find((function(n){return n.id==e.target.id})).name," has already been deleted.")),setTimeout((function(){y(null)}),5e3)})))}})]})};i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(j,{})}),document.getElementById("root"))},6:function(e,n,t){}},[[39,1,2]]]);
//# sourceMappingURL=main.93c504cd.chunk.js.map